
CREATE TYPE EMoyenPaiement AS ENUM ('Carte', 'Especes');

CREATE TYPE EETatLocation AS ENUM ('Terminée', 'En cours', 'Annulée');

CREATE TYPE ETailleFlotteur AS ENUM ('150l', '170l', '190l', '205l');

CREATE TYPE ETailleVoile AS ENUM ('3m2', '4m2', '4.5m2', '4.9m2', '5.4m2');

CREATE TYPE ECamping AS ENUM ('Jolibois', 'Grand Plage', 'Marande', 'Autre');

CREATE TYPE EPreferenceContact AS ENUM ('Mail', 'Téléphone');

CREATE TYPE EStatutClient AS ENUM ('Débutant', 'Sportif');

CREATE TYPE EStatutMateriel AS ENUM ('Reçu', 'Fonctionnel', 'Hors service', 'Mis au rebut');

CREATE TYPE EEtatCours AS ENUM ('Prévu', 'En cours', 'Réalisé', 'Annulé');

CREATE TABLE Personne(
Idpersonne SERIAL PRIMARY KEY NOT NULL UNIQUE,
Nom Varchar(30),
Prenom Varchar(30),
DateNaissance Date,
NumTelephone Varchar(10)
Mail Varchar(50)
);

CREATE TABLE Moniteur() INHERITS (Personne);

CREATE TABLE Client(
Camping ECamping,
Statut EStatutClient,
Taille float,
Poids float,
PreferenceContact EpreferenceContact
)INHERITS (Personne);

CREATE TABLE Propriétaire() INHERITS (Personne);

CREATE TABLE Garçon_de_plage() INHERITS (Personne);

CREATE TABLE Certificat_Medical(
IdCertificat Int Primary key NOT NULL UNIQUE,
DateDelivrance Date,
DocumentPDF bytea
);

CREATE TABLE Forfait(
IdForfait Int Primary Key NOT NULL,
DateFin Date,
NbSeancesRestantes int,
ForfaitEnfant Boolean,
IdPersonne int REFERENCES Personne(IdPersonne),
IdPrixForfait int REFERENCES Type_Forfait(IdPrixForfait)
);

CREATE TABLE Type_Forfait(
IdPrixForfait int Primary key Not null,
NbSeances int,
Prix int
);

CREATE TABLE Paiement(
IdPaiement int Primary key Not null,
DateHeure time,
Montant float,
MoyenPaiement EMoyenPaiement
);

CREATE TABLE Location(
IdLocation Int Primary key not null,
DateHeureLocation time,
Duree int,
TarifLocation float,
EtatLocation EEtatLocation,
NumSerie int REFERENCES Materiel(NumSerie),
IdPersonne int REFERENCES Personne(IdPersonne)
)
;

CREATE TABLE CoursPlancheVoile(
IdCours Int Primary Key NOT NULL,
DateHeure time,
Niveau EEtatCours,
IdPersonne int REFERENCES Personne(IdPersonne)
);

CREATE TABLE PrixMateriel(
IdPrixMateriel int primary key not null,
NomMateriel varchar(30),
PrixHeure float,
PrixHeureSupp float,
PrixDemiHeurefloat
)
;

CREATE TABLE Materiel(
NumSerie Int Primary Key NOT NULL,
Disponible Boolean,
NbPlaces Int,
Statut EStatutMateriel,
IdPrixMateriel int REFERENCES PrixMateriel(IdPrixMateriel)
)
;

CREATE TABLE Pedalo() INHERITS (Materiel);
CREATE TABLE StandUpPaddle() INHERITS (Materiel);
CREATE TABLE Catamaran() INHERITS (Materiel);
CREATE TABLE PlancheAVoile(
IdCours int REFERENCES CoursPlancheVoile(IdCours) ) INHERITS (Materiel);

CREATE TABLE Catamaran(
Taille ETailleVoile) INHERITS (PlancheAVoile);

CREATE TABLE Flotteur(
Taille ETailleFlotteur) INHERITS (PlancheAVoile);

CREATE TABLE PiedDeMat() INHERITS (PlancheAVoile);

CREATE TABLE Diplome(
IdDiplome int primary key not null,
DateObtention date,
DocumentPDF bytea
);

CREATE TABLE Compte (
IdCompte int primary key not null,
NomUtilisateur varchar(30),
MotDePase varchar(20)
);

CREATE TABLE PermisBateau(
IdPermis int primary key not null,
DocumentPDF bytea,
DateObtention Date,
IdPersonne int REFERENCES Personne(IdPersonne)
);
